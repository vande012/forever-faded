{"version":3,"file":"index-Bqh49AYj.mjs","sources":["../../../admin/src/constants.ts","../../../admin/src/pluginId.ts","../../../admin/src/utils/prefixPluginTranslations.ts","../../../admin/src/index.ts"],"sourcesContent":["export const PERMISSIONS = {\n  // This permission regards the main component (App) and is used to tell\n  // If the plugin link should be displayed in the menu\n  // And also if the plugin is accessible. This use case is found when a user types the url of the\n  // plugin directly in the browser\n  main: [\n    { action: 'plugin::documentation.read', subject: null },\n    { action: 'plugin::documentation.settings.regenerate', subject: null },\n    { action: 'plugin::documentation.settings.update', subject: null },\n  ],\n  open: [\n    { action: 'plugin::documentation.read', subject: null },\n    { action: 'plugin::documentation.settings.regenerate', subject: null },\n  ],\n  regenerate: [{ action: 'plugin::documentation.settings.regenerate', subject: null }],\n  update: [{ action: 'plugin::documentation.settings.update', subject: null }],\n};\n","export const pluginId = 'documentation';\n","const prefixPluginTranslations = (trad: Record<string, string>, pluginId?: string) => {\n  if (!pluginId) {\n    throw new TypeError(\"pluginId can't be empty\");\n  }\n\n  return Object.keys(trad).reduce(\n    (acc, current) => {\n      acc[`${pluginId}.${current}`] = trad[current];\n\n      return acc;\n    },\n    {} as Record<string, string>\n  );\n};\n\nexport { prefixPluginTranslations };\n","import { Information } from '@strapi/icons';\n\nimport { PERMISSIONS } from './constants';\nimport { pluginId } from './pluginId';\nimport { prefixPluginTranslations } from './utils/prefixPluginTranslations';\n\n// eslint-disable-next-line import/no-default-export\nexport default {\n  register(app: any) {\n    app.addMenuLink({\n      to: `plugins/${pluginId}`,\n      icon: Information,\n      intlLabel: {\n        id: `${pluginId}.plugin.name`,\n        defaultMessage: 'Documentation',\n      },\n      permissions: PERMISSIONS.main,\n      Component: async () => {\n        const { App } = await import('./pages/App');\n        return App;\n      },\n      position: 9,\n    });\n\n    app.registerPlugin({\n      id: pluginId,\n      name: pluginId,\n    });\n  },\n  bootstrap(app: any) {\n    app.addSettingsLink('global', {\n      intlLabel: {\n        id: `${pluginId}.plugin.name`,\n        defaultMessage: 'Documentation',\n      },\n      id: 'documentation',\n      to: pluginId,\n      Component: async () => {\n        const { SettingsPage } = await import('./pages/Settings');\n        return SettingsPage;\n      },\n      permissions: PERMISSIONS.main,\n    });\n  },\n  async registerTrads({ locales }: { locales: string[] }) {\n    const importedTrads = await Promise.all(\n      locales.map((locale) => {\n        return import(`./translations/${locale}.json`)\n          .then(({ default: data }) => {\n            return {\n              data: prefixPluginTranslations(data, pluginId),\n              locale,\n            };\n          })\n          .catch(() => {\n            return {\n              data: {},\n              locale,\n            };\n          });\n      })\n    );\n\n    return Promise.resolve(importedTrads);\n  },\n};\n"],"names":["PERMISSIONS","main","action","subject","open","regenerate","update","pluginId","prefixPluginTranslations","trad","Object","keys","reduce","acc","current","register","app","addMenuLink","to","icon","Information","intlLabel","id","defaultMessage","permissions","Component","App","position","registerPlugin","name","bootstrap","addSettingsLink","SettingsPage","registerTrads","locales","importedTrads","Promise","all","map","locale","then","default","data","catch","resolve"],"mappings":"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"}